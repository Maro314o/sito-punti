<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/manage_data.css') }}">
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <title>Gestisci dati</title>
</head>
<body>

<div class="sidebar">
  <!-- sidebar invariata -->
</div>

<div class="content">
  <nav><!-- menu --></nav>

  <main>
    <h1>Gestione Classe</h1>

    <!-- Selettore classe + data -->
    <div
      hx-get="{{ url_for('pagine_admin.invia_tabella') }}"
      hx-trigger="change from:#classe-select changed delay:200ms, change from:#data-input changed delay:200ms"
      hx-target="#student-table-container"
      hx-include="#classe-select, #data-input"
      hx-push-url="true"
    >
      <label>
        Classe:
        <select id="classe-select" name="classe">
          <option value="" disabled selected>Seleziona classe...</option>
          {% for classe in elenco_classi %}
            <option value="{{ classe.nome_classe }}" {% if classe.nome_classe == request.args.get('classe') %}selected{% endif %}>
              {{ classe.nome_classe }}
            </option>
          {% endfor %}
        </select>
      </label>

      <label>
        Data:
        <input type="date" id="data-input" name="data" value="{{ request.args.get('data', oggi) }}">
      </label>
    </div>

    <hr>

    <!-- Container che verrÃ  popolato da HTMX -->
    <div id="student-table-container">
      <p>Seleziona classe e data per vedere la tabella.</p>
    </div>

  </main>
</div>

</body>
</html>
